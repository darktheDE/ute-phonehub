## **CHỨC NĂNG MỚI: AI CHATBOT RAG TÀI LIỆU (HỖ TRỢ KHÁCH HÀNG THÔNG MINH)**

### **1. Mục tiêu**

Xây dựng **trợ lý ảo tích hợp AI (Chatbot RAG)** có khả năng:

- Tự động **trả lời câu hỏi của khách hàng** về sản phẩm, chính sách, hướng dẫn sử dụng, bảo hành, thanh toán,...
- **Trích xuất thông tin từ tài liệu nội bộ (FAQ, mô tả sản phẩm, hướng dẫn, chính sách)** để tạo câu trả lời chính xác, cập nhật và đáng tin cậy.
- Giúp giảm tải cho bộ phận chăm sóc khách hàng, đồng thời nâng cao trải nghiệm người dùng.

---

### **2. Phạm vi hoạt động**

- Hoạt động trong trang **Client (frontend)** — góc phải màn hình (biểu tượng tin nhắn/chat).
- Tích hợp trên toàn website, xuất hiện ở:
    - Trang chủ
    - Trang sản phẩm
    - Trang thanh toán
    - Trang hỗ trợ khách hàng

---

### **3. Đối tượng sử dụng**

| Loại người dùng | Quyền hạn |
| --- | --- |
| **Khách chưa đăng nhập** | Có thể chat, hỏi thông tin chung, sản phẩm, chính sách. |
| **Khách đã đăng nhập** | Có thể chat, hỏi thông tin cá nhân (đơn hàng, trạng thái vận chuyển,...). |
| **Quản trị viên (Admin)** | Cập nhật tài liệu tri thức, huấn luyện Chatbot, xem lịch sử chat. |

---

### **4. Mô tả chức năng chi tiết**

### **4.1. Giao diện người dùng (Frontend)**

- Biểu tượng chatbot ở góc dưới bên phải màn hình.
- Khi mở ra:
    - Hộp chat với giao diện thân thiện.
    - Gợi ý câu hỏi mẫu: “Sản phẩm nào đang giảm giá?”, “Chính sách bảo hành thế nào?”, “Tôi muốn biết thông tin iPhone 15 Pro”.
    - Tích hợp **hiển thị sản phẩm gợi ý trực tiếp trong cửa sổ chat** (thẻ sản phẩm gồm hình, tên, giá, nút “Xem chi tiết”).
- Chatbot có thể nhận:
    - **Văn bản tiếng Việt**
    - (Tùy chọn nâng cao) **Giọng nói hoặc hình ảnh** nếu hệ thống mở rộng sau này.

---

### **4.2. Xử lý ở tầng AI Backend (RAG Pipeline)**

**Quy trình hoạt động RAG (Retrieval-Augmented Generation):**

1. **Nhập câu hỏi:** Người dùng gửi câu hỏi (“Có iPhone 15 không?”, “Bảo hành bao lâu?”).
2. **Tiền xử lý:** Làm sạch câu hỏi, xác định mục đích (intent).
3. **Truy vấn tri thức:**
    - Hệ thống tìm kiếm trong **cơ sở dữ liệu tri thức (knowledge base)** gồm:
        - Tài liệu mô tả sản phẩm.
        - Chính sách giao hàng, bảo hành, đổi trả.
        - FAQ.
        - Hướng dẫn sử dụng.
    - Dùng **mô hình embedding + vector database (VD: FAISS, Pinecone)** để truy xuất đoạn văn phù hợp.
4. **Sinh câu trả lời:** Mô hình ngôn ngữ (LLM) tạo câu trả lời tự nhiên, chính xác và có trích dẫn nguồn.
5. **Gửi phản hồi:** Hiển thị câu trả lời cho người dùng trong khung chat.

---

### **4.3. Quản trị tài liệu tri thức (Admin)**

- Admin có thể:
    - Thêm, sửa, xóa tài liệu nguồn (PDF, DOCX, Markdown, text).
    - Cập nhật dữ liệu huấn luyện của chatbot (đồng bộ hóa embedding).
    - Xem thống kê lượt hỏi, phản hồi phổ biến.

---

### **5. Đầu vào – Xử lý – Đầu ra**

| **Thao tác** | **Đầu vào** | **Xử lý** | **Đầu ra** |
| --- | --- | --- | --- |
| Người dùng gửi câu hỏi | Câu hỏi văn bản | Xử lý ngôn ngữ tự nhiên, truy xuất tri thức, sinh phản hồi | Câu trả lời tự nhiên + sản phẩm liên quan |
| Admin tải lên tài liệu | File .pdf, .docx, .txt | Trích xuất nội dung, sinh embedding, lưu vào vector DB | Cập nhật kho tri thức |
| Người dùng hỏi về sản phẩm | Tên sản phẩm / từ khóa | Truy xuất thông tin sản phẩm từ DB | Hiển thị thẻ sản phẩm, link chi tiết |
| Người dùng hỏi đơn hàng (đã đăng nhập) | ID người dùng | Xác thực + truy xuất đơn hàng từ DB | Hiển thị trạng thái đơn hàng |

---

### **6. Phân quyền**

| Chức năng | Khách chưa đăng nhập | Khách đã đăng nhập | Admin |
| --- | --- | --- | --- |
| Chat, hỏi thông tin sản phẩm | ✔️ | ✔️ | ✔️ |
| Hỏi thông tin cá nhân (đơn hàng, tài khoản) | ❌ | ✔️ | ✔️ |
| Cập nhật tri thức chatbot | ❌ | ❌ | ✔️ |
| Xem thống kê chat | ❌ | ❌ | ✔️ |